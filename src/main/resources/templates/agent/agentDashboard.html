<div th:fragment="content">
	<main class="dashboard-content">
		<div class="row">

			<!-- 상담 스케줄 -->
			<div class="col-md-12 mb-4">
				<div class="card h-100">
					<div class="card-body">

						<!-- 상단 툴바 (고정) -->
						<div id="scheduleToolbar"
							 class="d-flex justify-content-between align-items-center mb-3">
							<h3 class="card-title">상담 스케줄</h3>
							<span id="dateRange" class="me-2">2025.05.01 ~ 2025.05.14</span>
						</div>

						<!-- FullCalendar 월/주 뷰 컨테이너 -->
						<div id="calendarContainer">
							<div id="calendar"></div>
						</div>

						<!-- 커스텀 주간 타임테이블 -->
						<div id="weeklyTimetable" style="display: none;">
							<table class="table text-center">
								<thead>
								<tr>
									<th>시간</th>
									<th>월</th>
									<th>화</th>
									<th>수</th>
									<th>목</th>
									<th>금</th>
								</tr>
								</thead>
								<tbody id="timetableBody"></tbody>
							</table>
						</div>

						<!-- 스케줄 추가 모달 -->
						<div class="modal fade" id="scheduleModal" tabindex="-1">
							<div class="modal-dialog">
								<form id="scheduleForm" class="modal-content">

									<input type="hidden" id="clientIdInput" name="clientId">
									<input type="hidden" name="agentId" value="1" />


									<div class="modal-header">
										<h5 class="modal-title">스케줄 추가</h5>
										<button type="button" class="btn-close"
												data-bs-dismiss="modal"></button>
									</div>
									<div class="modal-body">
										<div class="mb-3">
											<label class="form-label">날짜</label> <input type="date"
																						name="date" class="form-control" required>
										</div>

										<select name="contractTemplateId">
											<option value="1">표준 상담 계약서</option>
											<option value="2">특수 상담 계약서</option>
										</select>

										<!-- 시간 선택을 select로 변경 -->
										<div class="mb-3">
											<label class="form-label">예약 시간</label> <select name="time"
																							id="reservationTime" class="form-select" required></select>
										</div>

										<!-- 이메일 -->
										<div class="mb-3">
											<label class="form-label">이메일</label>
											<div class="input-group">
												<input type="email" name="email" class="form-control"
													   required>
												<button type="button" class="btn btn-outline-secondary"
														id="searchClientBtn">검색</button>
											</div>
											<div id="emailFeedback" class="mt-1"
												 style="font-size: 0.9em;"></div>
										</div>


										<!-- 휴대폰 번호 -->
										<div class="mb-3">
											<label class="form-label">휴대폰 번호</label> <input type="tel"
																							name="phone" class="form-control">
										</div>

										<div class="mb-3">
											<label class="form-label">고객명</label>
											<div class="input-group">
												<input type="text" name="clientName" class="form-control"
													   required>
											</div>
										</div>


										<!-- 계약 상태 -->
										<div class="mb-3">
											<label class="form-label">계약 상태</label> <select
												name="contractStatus" class="form-select" required>
											<option value="예약">예약</option>
											<option value="완료">완료</option>
											<option value="취소">취소</option>
										</select>
										</div>

										<!-- ↓ 메모 -->
										<div class="mb-3">
											<label class="form-label">메모</label>
											<textarea name="memo" class="form-control" rows="2"></textarea>
										</div>

										<!-- 초대 코드 -->
										<div class="mb-3 invite-code-group" style="display: none;">
											<label for="inviteCode" class="form-label">초대코드</label> <input
												type="text" class="form-control" id="inviteCode"
												name="inviteCode" readonly>
										</div>


									</div>
									<div class="modal-footer">
										<button type="button" class="btn btn-primary" id="saveBtn">추가</button>
										<button type="button" class="btn btn-success d-none"
												id="updateBtn">수정</button>
										<button type="button" class="btn btn-danger d-none"
												id="deleteBtn">삭제</button>
										<button type="button" class="btn btn-secondary"
												data-bs-dismiss="modal">취소</button>
									</div>
								</form>
							</div>
						</div>

					</div>
				</div>
			</div>

			<!-- 오늘의 계약 -->
			<div class="col-md-12 mb-4">
				<div class="card h-100">
					<div class="card-header">
						<h3 class="card-title">오늘의 계약</h3>
						<div class="d-flex align-items-center">
							<button id="prevDayBtn"
									class="btn btn-sm btn-outline-secondary me-2">
								<i class="bi bi-chevron-left"></i>
							</button>
							<span id="todayContractsDate"></span>
							<button id="nextDayBtn"
									class="btn btn-sm btn-outline-secondary ms-2">
								<i class="bi bi-chevron-right"></i>
							</button>
						</div>
					</div>
					<div class="card-body d-flex flex-column">

						<div id="todayContractsList" class="mt-3">
							<ul class="list-group"></ul>
						</div>
						<!-- 계약 현황 리스트 -->
						<div class="mt-3">
							<div class="fw-bold mb-2">나의 계약 현황</div>
							<ul class="status-list">
								<li class="status-item">
									<div class="status-label">진행중 계약</div>
									<div class="status-value">0</div>
								</li>
								<li class="status-item">
									<div class="status-label">완료된 계약</div>
									<div class="status-value">0</div>
								</li>
								<li class="status-item">
									<div class="status-label">취소/거절된 계약</div>
									<div class="status-value">0</div>
								</li>
								<li class="status-item">
									<div class="status-label">만료된 계약</div>
									<div class="status-value">0</div>
								</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<!-- 채팅창 영역 -->
			<div>
				<div id="chatMessages" style="height: 200px; overflow-y: auto;"></div>
				<input id="chatInput" placeholder="메시지를 입력하세요" />
				<button id="sendChatBtn" class="btn btn-sm btn-primary mt-2">전송</button>
			</div>


			<!-- 세 번째 행: 최근 완료된 계약과 만료 예정 계약 -->
			<div class="row">
				<!-- 최근 완료된 계약 카드 -->
				<div class="col-md-6 mb-4">
					<div class="card h-100">
						<div class="card-header">
							<h3 class="card-title">최근 완료된 계약</h3>
							<button class="btn btn-sm btn-outline-secondary">
								<i class="bi bi-list-ul"></i>
							</button>
						</div>
						<div class="card-body">
							<ul id="recentCompletedList" class="list-group list-group-flush"></ul>
						</div>
					</div>
				</div>

				<!-- 만료 예정 계약 카드 -->
				<div class="col-md-6 mb-4">
					<div class="card h-100">
						<div class="card-header">
							<h3 class="card-title">만료 예정 계약</h3>
							<button class="btn btn-sm btn-outline-secondary">
								<i class="bi bi-list-ul"></i>
							</button>
						</div>
						<div class="card-body">
							<ul class="list-group list-group-flush">
								<li class="list-group-item text-center text-muted py-4">만료
									예정인 계약이 없습니다.</li>
							</ul>
						</div>
					</div>
				</div>
			</div>

			<!-- 네 번째 행: SignSquare Blog -->
			<div class="row">
				<div class="col-12 mb-4">
					<div class="card">
						<div class="card-header">
							<h3 class="card-title">Visang Blog</h3>
						</div>
						<div class="card-body">
							<h5 class="mb-2">AI 전자계약 서비스 Visang 공식 출시</h5>
							<p>AI·DX 전문기업 인스웨이브시스템즈(450520, 대표 어세룡)가 전자서명 원스톱 AI 서비스인
								'싸인스퀘어(SignSquare)'를 공식 출시하고, 신규 가입자를 대상으로 무료 이용 프로모션을 진행한다고 25일
								밝혔다.</p>
						</div>
					</div>
				</div>
			</div>
	</main>
</div>

